services:
  opengist:
    image: ghcr.io/thomiceli/opengist:1.7
    restart: unless-stopped
    environment:
      - SERVICE_FQDN_OPENGIST_6157
      - OG_EXTERNAL_URL=$SERVICE_URL_OPENGIST
      - OG_SSH_PORT=22222
    volumes:
      - opengist-data:/opengist
    labels:
      - traefik.tcp.routers.opengist-ssh.rule=HostSNI(`*`)
      - traefik.tcp.routers.opengist-ssh.entrypoints=ssh
      - traefik.tcp.routers.opengist-ssh.service=opengist-ssh-svc
      - traefik.tcp.services.opengist-ssh-svc.loadbalancer.server.port=22222
